# 运算符详解

## 位运算

C 语言提供一些运算符可以直接操作整数中的位，称为位运算，这些运算符的操作数都必须是整型的。

### 按位 与、或、异或、取反 运算

```
Type		Operator
------------------------
Bitwise AND	&
Bitwise OR	|
Bitwise XOR	^
Bitwise	NOT	~
```

### 移位运算

```
Type		Operator
------------------------
Bitwise Lshift	<<
Bitwise Rshift	>>
```

建议只对无符号数做位运算，以减少出错的可能。

### 掩码

掩码可以对整数的某些位做操作：
- 取出某些位
- 将某些位置 0
- 将某些位置 1

## 其他运算符

- 复合赋值运算符：`*=  /=  +=  -=`
- 条件运算符：`expr1 ? expr2 : expr3`
- 逗号运算符：`expr1, expr2, ... , exprN`

sizeof 运算符：返回操作数的类型所占的字节数

typedef：给某种类型起个新的名字

## Side Effect 与 Sequence Point

调用一个函数可能产生 Side Effect，使用某些运算符也会产生 Side Effect。

C 标准规定代码中的某些点是 Sequence Point，当执行到一个 Sequence Point 时，在此之前的 Side Effect 必须全部执行完毕，在此之后的 Side Effect 必须一个都没有发生。

写表达式应遵循的：
- 原则一：在两个 Sequence Point 之间，同一个变量的值只允许被改变一次。
- 原则二：如果在两个 Sequence Point 之间既要读一个变量的值又要改变它的值，只有在读写顺序确定的情况下才可以这么写。

## 运算符总结

运算符 `+  -  *  /  %  >  <  >=  <=  ==  !=  &  |  ^` 以及各种复合赋值运算符要求两边的操作数类型一致，条件运算符 `? :` 要求后两个操作数类型一致，这些运算符在计算之前都需要做 Usual Arithmetic Conversion。

运算符优先级如下：
1. 标识符、常量、字符串和用 () 括号套起来的表达式说组成表达式的最基本单元，在运算中做操作数，优先级最高。

2. 后缀运算符，包括数组取下标 `[]`、函数调用 `()`、结构体取成员 `.`、指向结构体的指针取成员 `->`、后缀自增 `++`、后缀自减 `--`。

3. 单目运算符，包括前缀自增 `++`、前缀自减 `--`、`sizeof`、类型转换 `()`、取地址运算 `&`、指针间接寻址 `*`、正号 `+`、负号 `-`、按位取反 `~`、逻辑非 `!`。

4. 乘 `*`、除 `/`、模 `%`。左结合。

5. 加 `+`、减 `-`。左结合。

6. 移位运算符 `>>` `<<`。左结合。

7. 关系运算符 `>  <  >=  <=`。左结合。

8. 相等性运算符 `== !=`。左结合。

9. 按位与 `&`。左结合。

10. 按位异或 `^`。左结合。

11. 按位或 `|`。左结合。

12. 逻辑与 `&&`。左结合。

13. 逻辑或 `||`。左结合。

14. 条件运算符 `?:`。

15. 赋值 `=`、复合赋值运算符 `+=  -=`。右结合。

16. 逗号运算符 `,`。左结合。
